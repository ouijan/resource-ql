<!DOCTYPE html><html class="default" lang="en" data-base="./"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>resource-ql</title><link rel="icon" href="assets/favicon.ico"/><meta name="description" content="ResourceQL is a powerful and flexible query language designed for querying and manipulating resources in a structured manner. It provides a simple syntax for expressing complex queries, making it easy to retrieve and manipulate data from various sources."/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="index.html" class="title">ResourceQL</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>resource-ql</h1></div><div class="tsd-panel tsd-typography"><h1 align="center">ResourceQL</h1>
<p align="center">
  <img src="media/logo.svg"  alt="Resource-QL Logo" width="120px" height="120px"/>
  <br>
  <em>A type-safe, composable abstraction layer <br /> 
  for document and collection APIs in TypeScript</em>
  <br>
</p>
<p align="center">
  <a href="https://ouijan.github.io/resource-ql/docs">Documentation</a>
  Â·
  <a href="https://github.com/ouijan/resource-ql">Github Repo</a>
  <br>
  <br>
</p>
<p align="center">
  <a href="https://github.com/ouijan/resource-ql/actions/workflows/build.yml">
    <img src="https://github.com/ouijan/resource-ql/actions/workflows/build.yml/badge.svg" alt="Build Status" />
  </a>
  <a href="https://github.com/ouijan/resource-ql/actions/workflows/tests.yml">
    <img src="https://github.com/ouijan/resource-ql/actions/workflows/tests.yml/badge.svg" alt="Tests Status" />
  </a>
  <a href="https://ouijan.github.io/resource-ql/coverage/lcov-report">
    <img src="https://ouijan.github.io/resource-ql/coverage/badges.svg" alt="Test Coverage" />
  </a>
  <a href="https://ouijan.github.io/resource-ql/docs">
    <img src="https://ouijan.github.io/resource-ql/docs/coverage.svg" alt="Documentation" />
  </a>
</p>
<hr>
<br />
<h2 id="installation" class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Using npm:</p>
<pre><code class="shell"><span class="hl-0">$</span><span class="hl-1"> </span><span class="hl-2">npm</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> </span><span class="hl-3">--save</span><span class="hl-1"> </span><span class="hl-2">ouijan/resource-ql</span>
</code><button type="button">Copy</button></pre>

<p>In Typescript:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">NewResource</span><span class="hl-1">, </span><span class="hl-5">AdaptorTypes</span><span class="hl-1">, </span><span class="hl-5">IAdaptor</span><span class="hl-1">, </span><span class="hl-5">IDocResolver</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;resource-ql&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">// Set up an Adaptor</span><br/><span class="hl-3">type</span><span class="hl-1"> </span><span class="hl-7">MyAdaptorTypes</span><span class="hl-1"> = </span><span class="hl-7">AdaptorTypes</span><span class="hl-1">&lt;</span><br/><span class="hl-1">  </span><span class="hl-7">MyDocRef</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">MyQueryRef</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">MyColRef</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">MyConstraint</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">MyTransaction</span><br/><span class="hl-1">&gt;;</span><br/><br/><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">MyAdaptor</span><span class="hl-1"> </span><span class="hl-3">implements</span><span class="hl-1"> </span><span class="hl-7">IAdaptor</span><span class="hl-1">&lt;</span><span class="hl-7">MyAdaptorTypes</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-6">// Implement IAdaptor...</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Wrap your Adaptor</span><br/><span class="hl-3">function</span><span class="hl-1"> </span><span class="hl-0">getResource</span><span class="hl-1">&lt;</span><span class="hl-7">T</span><span class="hl-1">&gt;(): </span><span class="hl-7">IDocResolver</span><span class="hl-1">&lt;</span><span class="hl-7">MyAdaptorTypes</span><span class="hl-1">, </span><span class="hl-7">T</span><span class="hl-1">, </span><span class="hl-7">T</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-4">return</span><span class="hl-1"> </span><span class="hl-0">NewResource</span><span class="hl-1">&lt;</span><span class="hl-7">MyAdaptorTypes</span><span class="hl-1">, </span><span class="hl-7">T</span><span class="hl-1">&gt;(</span><span class="hl-3">new</span><span class="hl-1"> </span><span class="hl-0">MyAdaptor</span><span class="hl-1">());</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">// Build Resources</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">resource</span><span class="hl-1"> = </span><span class="hl-0">getResource</span><span class="hl-1">&lt;</span><span class="hl-7">IDocumentInterface</span><span class="hl-1">&gt;();</span>
</code><button type="button">Copy</button></pre>

<h2 id="why-resourceql" class="tsd-anchor-link">Why ResourceQL?<a href="#why-resourceql" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ResourceQL enables you to compose and organize queries in one place, promoting
code reuse and maintainability. By separating query logic from business logic,
your data access code stays modular and easier to manage.</p>
<p><strong>Example:</strong></p>
<p>Suppose you want to fetch users with different filters. You can define base
queries and extend them as needed:</p>
<pre><code class="typescript"><span class="hl-3">class</span><span class="hl-1"> </span><span class="hl-7">WorkspaceQuery</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-5">resource</span><span class="hl-1"> = </span><span class="hl-0">getResource</span><span class="hl-1">&lt;</span><span class="hl-7">IWorkspace</span><span class="hl-1">&gt;();</span><br/><span class="hl-1">  </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-5">users</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">resource</span><span class="hl-1">.</span><span class="hl-0">col</span><span class="hl-1">&lt;</span><span class="hl-7">IUser</span><span class="hl-1">&gt;(</span><span class="hl-2">&#39;users&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-5">activeUsers</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">users</span><span class="hl-1">.</span><span class="hl-0">constraints</span><span class="hl-1">(</span><span class="hl-0">where</span><span class="hl-1">(</span><span class="hl-2">&#39;active&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;==&#39;</span><span class="hl-1">, </span><span class="hl-3">true</span><span class="hl-1">));</span><br/><span class="hl-1">  </span><span class="hl-3">static</span><span class="hl-1"> </span><span class="hl-5">activeUsersByRole</span><span class="hl-1"> = </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-5">activeUsers</span><span class="hl-1">.</span><span class="hl-0">constraintsWith</span><span class="hl-1">((</span><span class="hl-5">role</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) </span><span class="hl-3">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-0">where</span><span class="hl-1">(</span><span class="hl-2">&#39;role&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;==&#39;</span><span class="hl-1">, </span><span class="hl-5">role</span><span class="hl-1">)</span><br/><span class="hl-1">  );</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Now, you can reuse and compose these queries anywhere in your application:</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">admins</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">WorkspaceQuery</span><span class="hl-1">.</span><span class="hl-0">activeUsersByRole</span><span class="hl-1">(</span><span class="hl-5">workspaceRef</span><span class="hl-1"> </span><span class="hl-2">&#39;admin&#39;</span><span class="hl-1">).</span><span class="hl-0">get</span><span class="hl-1">();</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">activeUsers</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">WorkspaceQuery</span><span class="hl-1">.</span><span class="hl-5">activeUsers</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-5">workspaceRef</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>This approach keeps queries DRY, maintainable, and reusable, while making
domain logic easier to test.</p>
<h2 id="easier-testing" class="tsd-anchor-link">Easier Testing<a href="#easier-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ResourceQL lets you easily stub or mock queries in tests. Since queries are
encapsulated, you can swap in test doubles without changing your domain logic.</p>
<p>Example:</p>
<p>Suppose you want to test <code>listActiveUserNames</code> without making real API calls:</p>
<pre><code class="typescript"><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">WorkspaceQuery</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../queries/workspace&#39;</span><span class="hl-1">;</span><br/><span class="hl-4">import</span><span class="hl-1"> { </span><span class="hl-5">listActiveUserNames</span><span class="hl-1"> } </span><span class="hl-4">from</span><span class="hl-1"> </span><span class="hl-2">&#39;../services/userService&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">jest</span><span class="hl-1">.</span><span class="hl-0">spyOn</span><span class="hl-1">(</span><span class="hl-5">WorkspaceQuery</span><span class="hl-1">, </span><span class="hl-2">&#39;activeUsers&#39;</span><span class="hl-1">).</span><span class="hl-0">mockResolvedValue</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-5">id:</span><span class="hl-1"> </span><span class="hl-2">&#39;123&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-5">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;Test User&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">test</span><span class="hl-1">(</span><span class="hl-2">&#39;listActiveUserNames returns user data&#39;</span><span class="hl-1">, </span><span class="hl-3">async</span><span class="hl-1"> () </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">names</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">listActiveUserNames</span><span class="hl-1">(</span><span class="hl-5">workspaceRef</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">expect</span><span class="hl-1">(</span><span class="hl-5">names</span><span class="hl-1">).</span><span class="hl-0">toEqual</span><span class="hl-1">([</span><span class="hl-2">&#39;Test User&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>This keeps tests fast and reliable, ensuring domain logic is tested independently of data sources.</p>
<h2 id="accessors" class="tsd-anchor-link">Accessors<a href="#accessors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Accessors let you fetch data as either a <code>Promise</code> or an <code>Observable</code>, using the
same interface for both. This enables consistent, flexible, and reusable queries
throughout your app.</p>
<pre><code class="typescript"><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">activeUsers</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">WorkspaceQuery</span><span class="hl-1">.</span><span class="hl-5">activeUsers</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-5">workspaceRef</span><span class="hl-1">);</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">activeUsers$</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-5">WorkspaceQuery</span><span class="hl-1">.</span><span class="hl-5">activeUsers</span><span class="hl-1">.</span><span class="hl-0">get$</span><span class="hl-1">(</span><span class="hl-5">workspaceRef</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<h2 id="resolvers" class="tsd-anchor-link">Resolvers<a href="#resolvers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Resolvers offer a structured way to access related documents or collections.
Starting with <code>NewResource</code>, you can easily fetch related data from a given
reference. This is ideal for projects with complex relationships, such as document
databases where documents reference each other.</p>
<p><strong>Example:</strong></p>
<p>Suppose you have a <code>User</code> document that references a <code>Workspace</code> document. You can
use resolvers to fetch related data easily:</p>
<pre><code class="typescript"><span class="hl-6">// Define your resource resolver</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">userResolver</span><span class="hl-1"> = </span><span class="hl-0">getResource</span><span class="hl-1">&lt;</span><span class="hl-7">IUser</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-6">// Create a new resolver from the userResolver</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">userWorkspaceResolver</span><span class="hl-1"> = </span><span class="hl-5">userResolver</span><span class="hl-1">.</span><span class="hl-0">parent</span><span class="hl-1">&lt;</span><span class="hl-7">IWorkspace</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-6">// Fetch the workspace data</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-8">workspaceData</span><span class="hl-1"> = </span><span class="hl-4">await</span><span class="hl-1"> </span><span class="hl-0">userWorkspaceResolver</span><span class="hl-1">(</span><span class="hl-5">userRef</span><span class="hl-1">).</span><span class="hl-0">get</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p>This pattern makes it simple to traverse relationships and fetch nested or
related documents in a type-safe way.</p>
<h2 id="adaptors" class="tsd-anchor-link">Adaptors<a href="#adaptors" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Backend adaptors provide a consistent interface for your app to interact with
any backendâREST APIs, databases, or custom services. This abstraction:</p>
<ul>
<li>Enables support for multiple or proprietary backends without changing core logic.</li>
<li>Hides backend-specific details from your application code.</li>
<li>Makes it easy to swap or update backends by modifying only the adaptor.</li>
<li>Reduces code duplication and improves maintainability.</li>
</ul>
<h3 id="creating-an-adaptor" class="tsd-anchor-link">Creating an Adaptor<a href="#creating-an-adaptor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><p>ResourceQL does not include a built-in adaptor, allowing you to create
integrations tailored to your backend or platform. To set up an adaptor,
implement the <code>IAdaptor</code> interface using your preferred backend library.
See example adaptors here:</p>
<ul>
<li><a href="https://github.com/ouijan/resource-ql/blob/main/src/examples/firestore-adaptor.ts">Proprietary Firestore wrapper</a></li>
<li>LokiJS (Work In Progress)</li>
<li>Firestore with <code>firebase</code> (Work In Progress)</li>
<li>Firestore with <code>firebase-admin</code> (Work In Progress)</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#installation"><span>Installation</span></a><a href="#why-resourceql"><span>Why <wbr/>Resource<wbr/>QL?</span></a><a href="#easier-testing"><span>Easier <wbr/>Testing</span></a><a href="#accessors"><span>Accessors</span></a><a href="#resolvers"><span>Resolvers</span></a><a href="#adaptors"><span>Adaptors</span></a><ul><li><a href="#creating-an-adaptor"><span>Creating an <wbr/>Adaptor</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">resource-ql</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer></footer><div class="overlay"></div></body></html>
